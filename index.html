<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="https://bartolomea.com.br/wp-content/uploads/2023/12/cropped-Bartolomea-icone-1x1-1-32x32.webp" type="image/x-icon">
    <title>Sensor de temperatura e umidade</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

    
    <style>
        :root
        {
            --main-color:#003967;
            --counter-color:#F4821F;
            --base-color: #b1b1b1;
        }

        *
        {
            padding:0px;
            margin:0px;

            font-family: "Roboto", Sans-serif;
            color: var(--counter-color);
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;

            /*border: solid 1px var(--main-color);*/
        }

        header
        {
            display: flex;
            flex-flow: column nowrap;
            align-items: center;
            justify-content: space-evenly;
            height: 20vh;
            background-color: var(--main-color);
            text-shadow: 1px 1px #854610;
        }

        header > img
        {
            width: 50%;

        }

        main
        {
            display:flex;
            flex-flow: column wrap;
            justify-content: space-evenly;
            align-items: center;
            width: 100%;
            height: 70vh;
            background-color: var(--base-color);
            background-image: url("https://bartolomea.com.br/wp-content/uploads/2023/12/Bartolomea-Textura-de-fundo-3-v1.webp");
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        main > div
        {
            display: flex;
            flex-flow: column wrap;
            justify-content: space-evenly;
            align-items: center;
            height:40%;
            width: 250px;
            border-radius: 20px;
            background-color: #F1E9DE;
            background-image: url("https://bartolomea.com.br/wp-content/uploads/2024/01/Bartolomea-Textura-de-fundo-2-v2.webp");
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
            box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.212);
            font-size: 1.5em;
        }

        main > div:last-child, main > div:last-child *
        {
            color:var(--main-color);
        }

        main span
        {
            height: 40px;
            width: 40px;
        }

        main div
        {
            display:flex;
            justify-content: space-evenly;
            align-items: center;
        }

        footer
        {
            display: flex;
            height: 10vh;
            font-size: 1em;
            background-color:var(--main-color);
        }
        
        .material-symbols-outlined {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.4em;
            font-variation-settings:
            'FILL' 1,
            'wght' 400,
            'GRAD' 0,
            'opsz' 48
        }


    </style>
</head>
<body>

    <header>
        <img src="https://bartolomea.com.br/wp-content/uploads/2023/12/Bartolomea-logo-190px-branco-1.webp" alt="logo">
        <div>Sensor de temperatura e umidade</div>
    </header>

    <main>
        <div>
            temperatura
            <div>
                <span class="material-symbols-outlined">
                    thermometer
                </span>
                <div id="temp">
                    32°C
                </div>
            </div>

        </div>
        <div>
            umidade
            <div>
                <span class="material-symbols-outlined">
                    humidity_percentage
                </span>
                <div id="humi">
                    80%
                </div>
            </div>
        </div>
    </main>

    <footer>
        © 2024 Colégio Santa Bartolomea Capitanio. Todos os direitos reservados. 
    </footer>

    <script>
        const eventSource = new EventSource("/sse");
        
        eventSource.onmessage = (event)=>{

            let data = event.data;
            console.log(data);

            data = JSON.parse(data)

            temp.innerText = data.temperature + "°C";
            humi.innerText = data.humidity + "%";
        
        }

        eventSource.onerror = (err)=>{
            console.error("SSE falhou:",err);
            eventSource = new EventSource("/sse");
        }
    </script>
</body>
</html>
